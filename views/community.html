<section class="panel">
  <div class="head"><button class="back" onclick="history.back()">â†</button><div class="title">ğŸ«‚ Community</div></div>

  <div class="section">
    <h3>âœ¨ Condividi</h3>
    <textarea class="in" id="post-text" placeholder="Cosa stai pensando oggi?"></textarea>
    <div class="row" style="margin-top:8px">
      <input id="post-file" type="file" class="in" style="padding:6px">
      <button class="btn" id="post-pub">Pubblica</button>
      <div class="small">Foto/Audio/File</div>
    </div>
  </div>

  <div class="section">
    <h3>ğŸ§µ Feed</h3>
    <div id="feed"></div>
  </div>
</section>

<script>
const C=(k)=>JSON.parse(localStorage.getItem('mf_com_'+k)||'[]'); const D=(k,v)=>localStorage.setItem('mf_com_'+k,JSON.stringify(v));
function render(){ const f=document.getElementById('feed'); f.innerHTML=''; C('posts').forEach(p=>{ const el=document.createElement('div'); el.className='section'; el.innerHTML = `<div>ğŸ‘¤ Tu</div><div style="margin-top:6px">${p.t||''}</div>${p.fn?`<div class="small" style="margin-top:6px">Allegato: ${p.fn}</div>`:''}`; f.prepend(el); }); }
document.getElementById('post-pub').onclick=()=>{ const t=document.getElementById('post-text').value.trim(); const f=document.getElementById('post-file').files[0]; if(!t && !f) return; const a=C('posts'); a.push({t,fn:f?.name||''}); D('posts',a); document.getElementById('post-text').value=''; document.getElementById('post-file').value=''; render(); };
render();
</script>
